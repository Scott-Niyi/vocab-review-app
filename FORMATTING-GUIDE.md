# 文本格式化指南

在编辑单词的定义和例句时，你可以使用以下格式化选项：

## 快捷键

- **Cmd/Ctrl + B**: 粗体
- **Cmd/Ctrl + I**: 斜体
- **Cmd/Ctrl + K**: 插入链接
- **Shift + Cmd/Ctrl + C**: 小型大写字母
- **Shift + Cmd/Ctrl + N**: 老式数字

## Markdown 语法

### 粗体
使用双星号包裹文本：
```
**粗体文本**
```
显示为：**粗体文本**

### 斜体
使用单星号或下划线包裹文本：
```
*斜体文本*
或
_斜体文本_
```
显示为：*斜体文本*

### 链接到其他单词
使用双方括号语法：
```
[[目标单词|显示文本]]
```
例如：
```
See also [[likewise|likewise]]
```
点击后会跳转到 "likewise" 这个单词

### 小型大写字母
使用 LaTeX 风格的命令：
```
\textsc{small caps}
```
显示为：ꜱᴍᴀʟʟ ᴄᴀᴘꜱ

### 老式数字
使用波浪号包裹数字：
```
~1234567890~
```
显示为：𝟙𝟚𝟛𝟜𝟝𝟞𝟟𝟠𝟡𝟘（老式数字样式，类似手写体数字）

例如：
```
In the ~1800~s, Europe was...
covid-~19~ pandemic
The G~7~ summit
```

注意：旧的 LaTeX 语法 `\oldstylenums{19}` 已被弃用，请使用新的 `~19~` 语法。

## 组合使用

你可以组合使用这些格式：
```
**粗体中包含 *斜体* 文本**
*斜体中包含 [[link|链接]]*
In the ~1800~s, \textsc{Europe} was...
```

## 自动括号包裹

当你选中文本后，按下以下任意键会自动包裹选中的文本：
- `(` `)` - 圆括号
- `[` `]` - 方括号
- `{` `}` - 花括号
- `"` - 双引号
- `'` - 单引号
- `` ` `` - 反引号
- `*` - 星号（斜体）
- `_` - 下划线（斜体）

## 预览

点击工具栏中的 "Preview" 按钮可以实时预览格式化效果。

## 修复说明

- ✅ 修复了 Small Caps 快捷键在选中文本时不起作用的问题
- ✅ 添加了老式数字支持（使用 `~数字~` 语法）
- ✅ 添加了斜体支持（使用 `*斜体*` 或 `_斜体_` 语法）
- ✅ 修复了 Cmd+Z 在编辑框中影响背景搜索框的问题
- ✅ 所有格式化快捷键现在支持两种模式：
  - 选中文本时：包裹选中的文本
  - 未选中时：插入占位符供输入

## 迁移说明

如果你的旧数据中使用了 `\oldstylenums{数字}` 语法，可以运行根目录下的 `convert_oldstylenums.py` 脚本自动转换：

```bash
python3 convert_oldstylenums.py
```

该脚本会自动将所有 `\oldstylenums{XXX}` 转换为 `~XXX~`。
